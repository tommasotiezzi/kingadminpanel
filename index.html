<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kings League Fantasy - Admin Panel</title>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <h1>üèÜ Kings League Fantasy</h1>
            <h2>Admin Panel</h2>
            <form id="loginForm">
                <input type="email" id="loginEmail" placeholder="Admin Email" required>
                <input type="password" id="loginPassword" placeholder="Password" required>
                <button type="submit">Login</button>
                <p id="loginError" class="error"></p>
            </form>
        </div>
    </div>

    <!-- Main Admin Panel -->
    <div id="mainPanel" class="screen">
        <!-- Header -->
        <header>
            <div class="header-content">
                <h1>üèÜ Kings League Fantasy - Vote Manager</h1>
                <div class="header-actions">
                    <span id="adminEmailDisplay" style="margin-right: 15px; color: #667eea; font-weight: 600;"></span>
                    <button id="addPlayerBtn" class="btn-primary">‚ûï Add Player</button>
                    <button id="calculateResultsBtn" class="btn-success">üéØ Calculate Results</button>
                    <button id="configBtn" class="btn-secondary">‚öôÔ∏è Scoring Config</button>
                    <button id="logoutBtn" class="btn-secondary">Logout</button>
                </div>
            </div>
        </header>

        <!-- Match Selection -->
        <section class="match-selection">
            <div class="selection-row">
                <div class="input-group">
                    <label>Matchday</label>
                    <select id="matchdaySelect">
                        <option value="">Select Matchday...</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Team A</label>
                    <select id="teamASelect">
                        <option value="">Select Team A...</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Team B</label>
                    <select id="teamBSelect">
                        <option value="">Select Team B...</option>
                    </select>
                </div>
                <button id="loadMatchBtn" class="btn-primary">Load Match</button>
            </div>
            <div id="matchInfo" class="match-info hidden">
                <span id="matchInfoText"></span>
            </div>
        </section>

        <!-- Split Screen: Team A vs Team B -->
        <section id="voteSection" class="vote-section hidden">
            <div class="teams-container-new">
                <!-- Team A -->
                <div class="team-panel-new">
                    <h2 id="teamAName" class="team-header-new">TEAM 1</h2>
                    
                    <!-- President -->
                    <div class="section-label">Presidente</div>
                    <div id="teamAPresident" class="president-table"></div>

                    <!-- Players -->
                    <div class="section-label" id="teamAPlayersLabel">Giocatori</div>
                    <div id="teamAPlayers" class="players-table"></div>
                </div>

                <!-- Team B -->
                <div class="team-panel-new">
                    <h2 id="teamBName" class="team-header-new">TEAM 2</h2>
                    
                    <!-- President -->
                    <div class="section-label">Presidente</div>
                    <div id="teamBPresident" class="president-table"></div>

                    <!-- Players -->
                    <div class="section-label" id="teamBPlayersLabel">Giocatori</div>
                    <div id="teamBPlayers" class="players-table"></div>
                </div>
            </div>

            <!-- Save Button -->
            <div class="save-section">
                <button id="saveAllBtn" class="btn-save">üíæ Save All Votes</button>
                <p id="saveStatus" class="save-status"></p>
            </div>
        </section>
    </div>

    <!-- Config Modal -->
    <div id="configModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>‚öôÔ∏è Scoring Configuration</h2>
            <div id="configForm"></div>
            <button id="saveConfigBtn" class="btn-primary">Save Config</button>
        </div>
    </div>

    <!-- Add Player Modal -->
    <div id="addPlayerModal" class="modal">
        <div class="modal-content">
            <span class="close-player">&times;</span>
            <h2>‚ûï Add New Player</h2>
            <form id="addPlayerForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="playerName">Nome Completo *</label>
                        <input type="text" id="playerName" required placeholder="Es: Marco Rossi">
                    </div>
                    
                    <div class="form-group">
                        <label for="playerTeam">Team *</label>
                        <select id="playerTeam" required>
                            <option value="">Select Team...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="playerRole">Ruolo *</label>
                        <select id="playerRole" required>
                            <option value="">Select Role...</option>
                            <option value="P">Portiere (P)</option>
                            <option value="D">Difensore (D)</option>
                            <option value="C">Centrocampista (C)</option>
                            <option value="A">Attaccante (A)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="playerRating">Overall Rating</label>
                        <input type="number" id="playerRating" min="1" max="100" placeholder="Es: 75">
                    </div>
                    
                    <div class="form-group">
                        <label for="playerAvatar">Avatar URL</label>
                        <input type="url" id="playerAvatar" placeholder="https://...">
                    </div>
                    
                    <div class="form-group checkbox-group">
                        <label>
                            <input type="checkbox" id="playerWildcard">
                            <span>Wildcard Player</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn-primary">‚úÖ Add Player</button>
                    <button type="button" id="cancelAddPlayer" class="btn-secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="admin-script.js"></script>
</body>
</html>